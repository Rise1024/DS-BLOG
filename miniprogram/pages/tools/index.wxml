<!--index.wxml-->
<view class="container">
  <picker mode="selector" range="{{rssList}}" range-key="description" value="{{selectedRssIndex}}" bindchange="handleRssChange">
    <view class="picker" wx:if="{{rssList && rssList.length > 0 && selectedRssIndex !== null}}">å½“å‰é€‰æ‹©ï¼š{{rssList[selectedRssIndex].description}}</view>
    <view class="picker" wx:else>è¯·é€‰æ‹©RSSæº</view>
  </picker>
  <towxml nodes="{{article}}"/>
  
  <!-- å¤§çº²æŒ‰é’® -->
  <view wx:if="{{headings && headings.length > 0}}" class="outline-btn" bindtap="toggleOutline">
    <text class="outline-icon">ğŸ“‹</text>
    <text class="outline-text">å¤§çº²</text>
  </view>

  <!-- å¤§çº²æŠ½å±‰ -->
  <view wx:if="{{showOutline}}" class="outline-overlay" bindtap="closeOutline">
    <view class="outline-drawer" catchtap="">
      <!-- æŠ½å±‰å¤´éƒ¨ -->
      <view class="outline-header">
        <text class="outline-title">æ–‡ç« å¤§çº²</text>
        <text class="outline-close" bindtap="closeOutline">âœ•</text>
      </view>
      
      <!-- å¤§çº²åˆ—è¡¨ -->
      <scroll-view class="outline-content" scroll-y="true">
        <view 
          wx:for="{{headings}}" 
          wx:key="anchor"
          class="outline-item level-{{item.level}} {{currentHeading === item.anchor ? 'active' : ''}}"
          data-anchor="{{item.anchor}}"
          data-title="{{item.title}}"
          bindtap="scrollToHeading"
        >
          <text class="outline-item-text">{{item.title}}</text>
        </view>
      </scroll-view>
    </view>
  </view>
  
  <!-- å·²å­˜åœ¨çš„åˆ†äº«æŒ‰é’® -->
  <button 
    class="share-btn" 
    bindtap="handleShareImage"
    style="position: fixed; right: 20rpx; bottom: 50rpx; background: #007aff; color: white; border-radius: 50rpx; padding: 10rpx 20rpx;">
    ç”Ÿæˆåˆ†äº«å›¾ç‰‡
  </button>
</view>