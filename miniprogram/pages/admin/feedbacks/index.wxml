<view class="container">
  <!-- çŠ¶æ€ç­›é€‰ -->
  <view class="filter-bar">
    <view 
      class="filter-item {{statusFilter === 'all' ? 'active' : ''}}"
      bindtap="onStatusFilterChange"
      data-status="all"
    >
      å…¨éƒ¨
    </view>
    <view 
      class="filter-item {{statusFilter === 'pending' ? 'active' : ''}}"
      bindtap="onStatusFilterChange"
      data-status="pending"
    >
      å¾…å¤„ç†
    </view>
    <view 
      class="filter-item {{statusFilter === 'processed' ? 'active' : ''}}"
      bindtap="onStatusFilterChange"
      data-status="processed"
    >
      å·²å¤„ç†
    </view>
    <view 
      class="filter-item {{statusFilter === 'closed' ? 'active' : ''}}"
      bindtap="onStatusFilterChange"
      data-status="closed"
    >
      å·²å…³é—­
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{isLoading && feedbacks.length === 0}}" class="loading">
    <view class="loading-spinner"></view>
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åé¦ˆåˆ—è¡¨ -->
  <view wx:else class="feedback-list">
    <view 
      wx:for="{{feedbacks}}" 
      wx:key="id"
      class="feedback-item"
    >
      <view class="feedback-header">
        <view class="feedback-user">
          <text class="user-name">{{item.user_nickname || 'åŒ¿åç”¨æˆ·'}}</text>
          <text class="feedback-time">{{item.created_at}}</text>
        </view>
        <view 
          class="status-badge"
          style="background-color: {{getStatusColor(item.status)}}20; color: {{getStatusColor(item.status)}}"
        >
          {{getStatusText(item.status)}}
        </view>
      </view>

      <view class="feedback-content">
        {{item.content}}
      </view>

      <view wx:if="{{item.contact}}" class="feedback-contact">
        <text class="contact-label">è”ç³»æ–¹å¼ï¼š</text>
        <text class="contact-value">{{item.contact}}</text>
      </view>

      <view wx:if="{{item.processed_at}}" class="processed-time">
        å¤„ç†æ—¶é—´ï¼š{{item.processed_at}}
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view wx:if="{{item.status === 'pending'}}" class="feedback-actions">
        <button 
          class="action-btn process-btn"
          bindtap="markAsProcessed"
          data-id="{{item.id}}"
        >
          æ ‡è®°ä¸ºå·²å¤„ç†
        </button>
        <button 
          class="action-btn close-btn"
          bindtap="markAsClosed"
          data-id="{{item.id}}"
        >
          å…³é—­
        </button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{feedbacks.length === 0 && !isLoading}}" class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— åé¦ˆ</text>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{isLoading && feedbacks.length > 0}}" class="loading-more">
      <view class="loading-spinner"></view>
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view wx:if="{{!hasMore && feedbacks.length > 0}}" class="no-more">
      æ²¡æœ‰æ›´å¤šäº†
    </view>
  </view>
</view>

